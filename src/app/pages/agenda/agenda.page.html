<ion-content class="agenda-container" fullscreen>
  <!-- Top info com padding -->
  <div class="top-info ion-padding">
    <div class="user-header">
      <img [src]="photoURL" alt="avatar" class="avatar" />
      <div class="user-info">
        <div class="user-top">
          <h3 class="username">{{ name }}</h3>
          <button class="logout-button" (click)="logout()">
            <img src="assets/icon/enter-sharp.png" alt="logout" />
          </button>
        </div>

        <!-- Date picker -->
        <div class="date-picker ion-margin-top">
          <label>Selecione uma data:</label>
          <button class="calendar-button" (click)="showDatePicker = true">
            <img src="assets/icon/calendar.png" alt="calendar" />
            <span *ngIf="selectedDate">{{ selectedDate }}</span>
            <span *ngIf="!selectedDate">Escolher</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Date picker modal -->
  <ion-datetime
    *ngIf="showDatePicker"
    presentation="date"
    (ionChange)="onDateSelected($event)"
    (ionCancel)="showDatePicker = false"
  ></ion-datetime>

  <!-- Agenda card -->
  <ion-card class="ion-margin" *ngIf="selectedDate">
    <ion-card-header>
      <h2 class="card-title">Agenda</h2>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let item of agendaItems" [color]="item.cor">
          <img [src]="item.imagem" alt="avatar" class="avatar" />
          <ion-label>
            <h3>{{ item.nome }}</h3>
            <p>{{ item.status }}</p>
          </ion-label>

          <!-- Botões de ação -->
          <ion-button
            *ngIf="role === 'aluno' && item.status === 'Disponível'"
            slot="end"
            size="small"
            (click)="abrirModal(item.id)">
            Marcar
          </ion-button>

          <ion-button
            *ngIf="role === 'professor'"
            slot="end"
            size="small"
            color="danger"
            (click)="cancelarAula(item.id)">
            Cancelar
          </ion-button>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
</ion-content>
